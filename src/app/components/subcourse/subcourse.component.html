<!-- https://stackblitz.com/edit/angular-q5txgw?file=src/app/app.component.html -->
<!-- https://alligator.io/angular/reactive-forms-formarray-dynamic-fields/ -->
<!-- https://angular.io/api/forms/FormArrayName -->
<!-- https://www.concretepage.com/angular-2/angular-2-formgroup-example -->


<ul class="nav nav-pills mb-3" id="pills-tab" role="tablist">
  <li class="nav-item">
    <a class="nav-link active" id="pills-home-tab" data-toggle="pill" href="#pills-home" role="tab" aria-controls="pills-home" aria-selected="true">Search</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" id="pills-profile-tab" data-toggle="pill" href="#pills-profile" role="tab" aria-controls="pills-profile" aria-selected="false">Add/Update</a>
  </li>
</ul>
<div class="tab-content" id="pills-tabContent">
  <div class="tab-pane fade show active" id="pills-home" role="tabpanel" aria-labelledby="pills-home-tab">
  		<div class="container">
			<div class="row">
				<div class="container">
					<div class="row">
							<ag-grid-angular
									#agGrid
									id="myGrid"
									style="width: 480px; height: 400px;"
									class="ag-theme-balham"
									[enableSorting]="true"
									[enableFilter]="true"
									[rowData]="rowData"
									rowSelection='multiple'
									(gridReady)="onGridReady($event)"
									[columnDefs]="columnDefs">
							</ag-grid-angular>
					</div>
				</div>
			</div>
		</div>
  </div>
  <div class="tab-pane fade" id="pills-profile" role="tabpanel" aria-labelledby="pills-profile-tab">
  	<form [formGroup]="dataForm" novalidate (ngSubmit)="editSubmit(dataForm)">
	    <div class="row">
          <div class="col-md-3">
			  <div class="form-group">
		        <label for="course">Course</label>
		        	<ng-select [items]="courses"
								bindLabel="name" placeholder="No course selected"
								bindValue="_id" formControlName="course">
					</ng-select>
		      </div>
	       	  </div>
	          <div class="col-md-8">		
			      <div class="form-group">
			        <label for="course">Sub Course Name</label>
			        <input class="form-control" formControlName="name">
			      </div>
		   	  </div>
		</div>
		<div class="row">
	          <div class="col-md-11">
			      <div class="form-group">
			        <textarea rows="3"class="form-control" formControlName="details" placeholder="Details"></textarea>
			      </div>
			  </div>
		  </div>
	   <div formArrayName="items">
	   <div *ngFor="let item of dataForm.controls.items.controls; let i=index"> 
	   		<div [formGroupName]="i" class="row">
	   			<div class="col-2"><div (click)="deleteFieldValue(i)" class="input-group-text">Delete</div></div>
			    <div class="col-3">
			      <div class="form-group">
			        <input class="form-control" formControlName="label" placeholder="Item name">
			      </div>
			    </div>
			    <div class="col-6">
			      <div class="form-group">
			        <input class="form-control" formControlName="description" placeholder="Item description">
			      </div>
			   	</div>
	   	    </div>
	   	    </div>
	    </div>
	    <div class="row">
	          <div class="col-md-6">
	          	<button
	          		class="btn btn-success btn-sm" 
	          		type="button" (click)="addItem()" 
	          		style="margin-right:10px">Add More Item</button>
	          </div>
	    </div>
	     <div class="modal-footer">
	    	<button id="data-cancel-btn" type="button" class="btn btn-danger btn-sm" (click)="closeModal()">Cancel</button>
			<button id="data-submit-btn" type="submit" class="btn btn-primary btn-sm">Submit</button>
	     </div>
	</form>
  </div>
</div>