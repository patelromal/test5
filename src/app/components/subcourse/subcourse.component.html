<!-- https://stackblitz.com/edit/angular-q5txgw?file=src/app/app.component.html -->
<!-- https://alligator.io/angular/reactive-forms-formarray-dynamic-fields/ -->

<ul class="nav nav-tabs" role="tablist">
  <li class="nav-item">
    <a class="nav-link active" href="#table" role="tab" data-toggle="tab">Search</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="#detail" role="tab" data-toggle="tab">Add/Update</a>
  </li>
</ul>

<!-- Tab panes -->
<div class="tab-content">
  <div role="tabpanel" class="tab-pane fade in active" id="table">
  		<div class="container">
			<button type="button" class="btn btn-primary btn-sm" (click)="openModal()">New Course</button>
			<div class="row">
				<div class="container">
					<div class="row">
							<ag-grid-angular
									#agGrid
									id="myGrid"
									style="width: 480px; height: 400px;"
									class="ag-theme-balham"
									[enableSorting]="true"
									[enableFilter]="true"
									[rowData]="rowData"
									rowSelection='multiple'
									(gridReady)="onGridReady($event)"
									[columnDefs]="columnDefs">
							</ag-grid-angular>
					</div>
				</div>
			</div>
		</div>
  </div>
  <div role="tabpanel" class="tab-pane fade" id="detail">
	<form [formGroup]="dataForm" novalidate (ngSubmit)="editSubmit(dataForm)">
	    <div class="row">
          <div class="col-md-3">
			  <div class="form-group">
		        <label for="course">Course</label>
		        	<ng-select [items]="courses"
								bindLabel="name" placeholder="No course selected"
								bindValue="_id" formControlName="course">
					</ng-select>
		      </div>
	       	  </div>
	          <div class="col-md-8">		
			      <div class="form-group">
			        <label for="course">Sub Course Name</label>
			        <input class="form-control" formControlName="name">
			      </div>
		   	  </div>
		</div>
		<div class="row">
	          <div class="col-md-11">
			      <div class="form-group">
			        <textarea rows="3"class="form-control" formControlName="details" placeholder="Details"></textarea>
			      </div>
			  </div>
		  </div>
	    <div formArrayName="items" *ngFor="let item of dataForm.get('items').controls; let i = index;">
		  <div [formGroupName]="i">
	   		<div class="row">
	   			<div class="col-2"><div (click)="deleteFieldValue(i)" class="input-group-text">Delete</div></div>
			    <div class="col-3">
			      <div class="form-group">
			        <input class="form-control" formControlName="label" placeholder="Item name">
			      </div>
			    </div>
			    <div class="col-6">
			      <div class="form-group">
			        <input class="form-control" formControlName="description" placeholder="Item description">
			      </div>
			   	</div>
	   	    </div>
  	      </div>
	    </div>
	    <div class="row">
	          <div class="col-md-6">
	          	<button
	          		class="btn btn-success btn-sm" 
	          		type="button" (click)="addItem()" 
	          		style="margin-right:10px">Add More Item</button>
	          </div>
	    </div>
	     <div class="modal-footer">
	    	<button id="data-cancel-btn" type="button" class="btn btn-danger btn-sm" (click)="closeModal()">Cancel</button>
			<button id="data-submit-btn" type="submit" class="btn btn-primary btn-sm">Submit</button>
	     </div>
	</form>
	</div>
</div>


<!-- 	    <div class="row" *ngFor="let field of fieldArray; let i = index"> -->
<!-- 	         <div class="col-2" align="center"> -->
<!-- 					<div (click)="deleteFieldValue(i)"  -->
<!-- 						 class="input-group-text">Delete -->
<!-- 					</div> -->
<!-- 			  </div> -->
<!-- 	          <div class="col-3"> -->
<!-- 	          	<input class="form-control" type="text"  -->
<!-- 	          		   name="{{field.name}}" formControlName="label" -->
<!-- 	          		   placeholder="Title"> -->
<!-- 	          </div> -->
<!-- 	          <div class="col-6"> -->
<!-- 	          	<input class="form-control" type="text"  -->
<!-- 	          		   name="{{field.name}}" formControlName="labelvalue" -->
<!-- 	          		   placeholder="value"> -->
<!-- 	          </div> -->
<!--         </div> -->
<!-- 	    <div class="row"> -->
<!-- 	          <div class="col-md-6"> -->
<!-- 			  <div class="form-group"> -->
<!-- 		        <label for="course">Course</label> -->
<!-- 		        	<ng-select [items]="courses" -->
<!-- 								bindLabel="name" placeholder="No course selected" -->
<!-- 								bindValue="_id" formControlName="course"> -->
<!-- 					</ng-select> -->
<!-- 		      </div> -->
<!-- 	       	  </div> -->
<!-- 	          <div class="col-md-6">		 -->
<!-- 			      <div class="form-group"> -->
<!-- 			        <label for="name">Sub Course</label> -->
<!-- 			        <input id="name" type="text"  -->
<!-- 			        class="form-control"  -->
<!-- 			        formControlName="name" /> -->
<!-- 			      </div> -->
<!-- 		   	  </div> -->
<!-- 		 </div> -->
<!--          <div class="row"> -->
<!-- 	          <div class="col-md-6"> -->
<!-- 			      <div class="form-group"> -->
<!-- 			        <label for="prerequisites">Prerequisites</label> -->
<!-- 			        <textarea id="prerequisites" class="form-control" formControlName="prerequisites"></textarea> -->
<!-- 			      </div> -->
<!-- 			  </div> -->
<!-- 	          <div class="col-md-6"> -->
<!-- 			      <div class="form-group"> -->
<!-- 			        <label for="regular">Regular</label> -->
<!-- 			        <textarea id="regular" class="form-control" formControlName="regular"></textarea> -->
<!-- 			      </div> -->
<!-- 			  </div> -->
<!-- 		  </div> -->
<!-- 		  <div class="row"> -->
<!-- 	          <div class="col-md-6">	  -->
<!-- 			      <div class="form-group"> -->
<!-- 			        <label for="fees">Fees</label> -->
<!-- 			        <textarea id="fees" type="text" class="form-control" formControlName="fees"></textarea> -->
<!-- 			      </div> -->
<!-- 			  </div> -->
<!-- 	         <div class="col-md-6"> -->
<!-- 			      <div class="form-group"> -->
<!-- 			        <label for="feesremark">Fees Remark</label> -->
<!-- 			        <textarea id="feesremark" class="form-control" formControlName="feesremark"></textarea> -->
<!-- 			      </div> -->
<!-- 			 </div> -->
<!-- 		 </div> -->
<!-- 		 <div class="row"> -->
<!--          	  <div class="col-md-6"> -->
<!-- 			      <div class="form-group"> -->
<!-- 			        <label for="online">Online</label> -->
<!-- 			        <textarea id="online" class="form-control" formControlName="online"></textarea> -->
<!-- 			      </div> -->
<!-- 			  </div> -->
<!-- 		      <div class="col-md-6"> -->
<!-- 			      <div class="form-group"> -->
<!-- 			        <label for="home">Home</label> -->
<!-- 			        <textarea id="home" class="form-control" formControlName="home"></textarea> -->
<!-- 			      </div> -->
<!-- 		     </div> -->
<!-- 		 </div> -->
<!-- 		 <div class="row"> -->
<!-- 		    <div class="col-md-6"> -->
<!-- 		      <div class="form-group"> -->
<!-- 		        <label for="centrebased">Centrebased</label> -->
<!-- 		        <textarea id="centrebased" class="form-control" formControlName="centrebased"></textarea> -->
<!-- 		      </div> -->
<!-- 		    </div> -->
<!-- 		    <div class="col-md-6"> -->
<!-- 		      <div class="form-group"> -->
<!-- 		        <label for="structure">Structure</label> -->
<!-- 		        <textarea id="structure" class="form-control" formControlName="structure"></textarea> -->
<!-- 		      </div> -->
<!-- 	    	</div> -->
<!-- 	  	 </div> -->
<!-- 	  	 </div> -->
<!-- 	  	 </div> -->